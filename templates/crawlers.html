{%extends "nav_bar.html"%}

{%block content%}
<!-- Tab Nav -->
<ul class="nav nav-tabs" id="myTab" role="tablist" style="padding-top: 5px; padding-left: 20px;">
	<li class="nav-item">
		<a class="nav-link active" data-toggle="tab" href="#add" role="tab" aria-controls="add">Add</a>
	</li>
	<li class="nav-item">
		<a class="nav-link" data-toggle="tab" href="#manage" role="tab" aria-controls="manage">Manage</a>
	</li>
</ul>

<!-- Tab Forms -->
<div class="tab-content">
	<!-- Add crawler tab -->
	<div class="tab-pane active" id="add" role="tabpanel">
		<div class="container">
			<form action="" method="post">
		
				<!-- Crawler Name -->
			
				<div class="form-group">
					<label for="crawler-name">Name</label>
					<input type="text" class="form-control" id="crawler-name" placeholder="Name of crawler" name="name" required>
				</div>
			
		
				<div class="form-row">
						<!-- Category -->
						<div class="form-group col-md-6"
						<label for="category">Category</label>
							<select name="category" class="form-control" id="category" onchange="this.form.submit()">
								{% for i in categories %}
									{% if i == current_category %}
										<option selected>{{i}}</option>			
									{% else %}
										<option>{{i}}</option>
									{% endif %}
								{% endfor %}
							</select>
						</div>
					
						<!-- Subcategory -->
						<div class="form-group col-md-6"
						<label for="subcategory">Subcategory</label>
							<select name="subcategory" class="form-control" id="subcategory">
								{% for i in subcategories %}
									{% if i == current_subcategory %}
										<option selected>{{i}}</option>			
									{% else %}
										<option>{{i}}</option>
									{% endif %}
								{% endfor %}
							</select>
						</div>
				</div>

				<!-- URL Term -->
				<div class="form-group">
					<label for="url">URL</label>
					<input name="url" type="text" class="form-control" id="url" placeholder="Crawl a specific URL" value="">
					<small style="color:#5b5d60">Note: Entering a URL will override any category/subcategory selections</small>
				</div>
					

				<button class="btn btn-primary" type="submit" formaction={{ url_for("preview") }}>Preview</button>
				<button class="btn btn-primary" type="submit" formaction={{ url_for("add") }}>Add Crawler</button>
			</form>
		</div>

		<!-- Preview window -->
		<div>
		{% include "preview_content.html" %}
		</div>
	</div>


	<!-- Manage tab -->
	<div class="tab-pane" id="manage" role="tabpanel">
		<div class="container">

			<!-- Generate active crawlers -->
			<!-- Crawler info -->
			<form action="", method="post">
				<div class="form-row">
					<!-- Name -->
					<div class="form-group col-md-6">
						<label for="crawler-name">Name</label>
						<input type="text" class="form-control" id="crawler-name" value="{{name}}" name="name" disabled>
					</div>
					<div class="form-group col-md-3">
						<label for="category">Category</label>
						<input type="text" class="form-control" id="category" placeholder="-" value="{{category}}" name="name" disabled>
					</div>
					<div class="form-group col-md-3">
						<label for="subcategory">Subcategory</label>
						<input type="text" class="form-control" id="subcategory" placeholder="-" value="{{subcategory}}" name="name" disabled>
					</div>
				</div>
				
				<div class="form-row">
					<!-- URL -->
					<div class="form-group col-md-6">
						<label for="url">URL</label>
						<input name="url" type="text" class="form-control" placeholder="-" id="url" value="{{name}}" disabled>
					</div>
					<div class="form-group col-md-2">
						<label for="status">Status</label>
						<input name="status" type="text" class="form-control" id="status" value="Running..." disabled>
					</div>
					<!-- Submit Buttons -->
					<div class="form-group ml-auto mt-auto">
						<button class="btn btn-primary" type="submit" formaction={{ url_for("info_crawler") }}>Get Info</button>
						<button class="btn btn-primary" type="submit" formaction={{ url_for("rename_crawler") }}>Rename</button>
						<button class="btn btn-danger" type="submit" formaction={{ url_for("stop_crawler") }}>Stop</button>
						<button class="btn btn-danger" type="submit" formaction={{ url_for("delete_crawler") }}>Delete</button>
					</div>
				</div>
				
			</form>
		</div>
	</div>
</div>



<!-- My JS -->

<!-- <script src="{{ url_for("static", filename="js/crawlers.js") }}"></script> -->
{%endblock%}